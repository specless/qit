<!doctype html>

<html lang="en">
<head>
 	<style>
 	#large {
	  height: 1000000px;
	}

	#output {
	  position: fixed;
	  top: 0;
	  left: 0;
	}
	</style>
</head>
<body>
	<div id="large"></div>
	<h2 id="output"></h2>

<script>

// This function should always return the correct element. Optionally pass a selector string or a valid dom element
function getScrollEl(selectorOrEl) {
  var el;
  // Checks if selectorOrEl is a valid DOM element
  function isElement(o){
    return (
      typeof HTMLElement === "object" ? o instanceof HTMLElement : //DOM2
      o && typeof o === "object" && o !== null && o.nodeType === 1 && typeof o.nodeName==="string"
    );
  }
  // Checks and returns DOM node if is verified as a DOM element
  function elementTest(o){
    if (isElement(o)) {
      return o
    }
  }
  // Checks if browser is IE
  function isIE() {
    ua = navigator.userAgent;
    /* MSIE used to detect old browsers and Trident used to newer ones*/
    var is_ie = ua.indexOf("MSIE ") > -1 || ua.indexOf("Trident/") > -1;
    return is_ie; 
  }
  try { el = elementTest(selectorOrEl) || document.querySelector(selectorOrEl) || document.scrollingElement}
  finally {
    if (!el) {
      if (isIE()) {
        el = document.documentElement;
      } else {
        el = window;
      }
    }
  }
  return el
}
// This function returns the element to listen for a scroll event based on what the scroll element is
function getScrollListener(scrollEl) {
  if (scrollEl === document.documentElement || scrollEl === window || scrollEl === document.body) {
    return window
  } else {
    return scrollEl
  }
}

var elementOption = null;
var scrollEl = getScrollEl(elementOption);
var scrollListener = getScrollListener(scrollEl);

function updateScrollValue() {
  var value = Math.max(scrollEl.scrollY || scrollEl.pageYOffset || scrollEl.scrollTop || 0);
  output.innerHTML = '<span style="color:green">' + value + '</span>, ' + window.pageYOffset + ', ' + document.body.scrollTop + ', ' + document.documentElement.scrollTop + ', ' + window.scrollY;
}

updateScrollValue();
scrollListener.addEventListener('scroll', updateScrollValue);
</script>
</body>
</html>